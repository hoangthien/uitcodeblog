import{_ as o}from"./plugin-vue_export-helper-c27b6911.js";import{r as t,o as l,c,a,b as n,d as i,e as s}from"./app-a516acff.js";const d={},p=s('<h1 id="cai-moi-truong-drupal-voi-lando-docker-ubuntu-tren-windows-10" tabindex="-1"><a class="header-anchor" href="#cai-moi-truong-drupal-voi-lando-docker-ubuntu-tren-windows-10" aria-hidden="true">#</a> Cài môi trường Drupal với Lando Docker Ubuntu trên Windows 10</h1><h2 id="install-ubuntu-on-wsl2-on-windows-10" tabindex="-1"><a class="header-anchor" href="#install-ubuntu-on-wsl2-on-windows-10" aria-hidden="true">#</a> Install Ubuntu on WSL2 on Windows 10</h2><h3 id="mo-turn-windows-features-on-or-off" tabindex="-1"><a class="header-anchor" href="#mo-turn-windows-features-on-or-off" aria-hidden="true">#</a> Mở Turn Windows features on or off</h3><p>Check vào:</p><ul><li>Windows Subsystem for Linux</li><li>Virtual Machine Platform<br> và click ok rồi restart máy</li></ul><h3 id="set-wsl-2-as-your-default-version" tabindex="-1"><a class="header-anchor" href="#set-wsl-2-as-your-default-version" aria-hidden="true">#</a> Set WSL 2 as your default version</h3>',6),r={href:"https://wslstorestorage.blob.core.windows.net/wslblob/wsl_update_x64.msi",target:"_blank",rel:"noopener noreferrer"},u=a("br",null,null,-1),v=s(`<div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>wsl --set-default-version <span class="token number">2</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h2 id="cai-ubuntu" tabindex="-1"><a class="header-anchor" href="#cai-ubuntu" aria-hidden="true">#</a> Cài Ubuntu</h2><p>Vào store cài ubuntu bản 20.4, mở lên rồi nhập user, pass</p>`,3),h={id:"tai-docker-ve-va-cai-https-www-docker-com",tabindex:"-1"},m=a("a",{class:"header-anchor",href:"#tai-docker-ve-va-cai-https-www-docker-com","aria-hidden":"true"},"#",-1),b={href:"https://www.docker.com/",target:"_blank",rel:"noopener noreferrer"},k=s(`<h2 id="cai-php-7-4-đe-dung-cho-composer-trong-ubuntu" tabindex="-1"><a class="header-anchor" href="#cai-php-7-4-đe-dung-cho-composer-trong-ubuntu" aria-hidden="true">#</a> Cài php 7.4 để dùng cho composer trong ubuntu:</h2><p>Mở cửa sổ dòng lệnh với ubuntu vừa cài lên và chạy các lệnh sau:</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">sudo</span> <span class="token function">apt-get</span> update
<span class="token function">sudo</span> <span class="token function">apt</span> <span class="token parameter variable">-y</span> <span class="token function">install</span> software-properties-common
<span class="token function">sudo</span> add-apt-repository ppa:ondrej/php
<span class="token function">sudo</span> <span class="token function">apt-get</span> update
<span class="token function">sudo</span> <span class="token function">apt</span> <span class="token parameter variable">-y</span> <span class="token function">install</span> php7.4
<span class="token function">sudo</span> <span class="token function">apt-get</span> <span class="token function">install</span> <span class="token parameter variable">-y</span> php7.4-cli php7.4-json php7.4-common php7.4-mysql php7.4-zip php7.4-gd php7.4-mbstring php7.4-curl php7.4-xml php7.4-bcmath
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>php -v nếu có xuất hiện phiên bản php là cài thành công</p><h2 id="cai-composer" tabindex="-1"><a class="header-anchor" href="#cai-composer" aria-hidden="true">#</a> Cài composer</h2><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token builtin class-name">cd</span> ~
<span class="token function">curl</span> <span class="token parameter variable">-sS</span> https://getcomposer.org/installer <span class="token parameter variable">-o</span> /tmp/composer-setup.php
<span class="token assign-left variable">HASH</span><span class="token operator">=</span><span class="token variable"><span class="token variable">\`</span><span class="token function">curl</span> <span class="token parameter variable">-sS</span> https://composer.github.io/installer.sig<span class="token variable">\`</span></span>
php <span class="token parameter variable">-r</span> <span class="token string">&quot;if (hash_file(&#39;SHA384&#39;, &#39;/tmp/composer-setup.php&#39;) === &#39;<span class="token variable">$HASH</span>&#39;) { echo &#39;Installer verified&#39;; } else { echo &#39;Installer corrupt&#39;; unlink(&#39;composer-setup.php&#39;); } echo PHP_EOL;&quot;</span>
<span class="token function">sudo</span> php /tmp/composer-setup.php --install-dir<span class="token operator">=</span>/usr/local/bin <span class="token parameter variable">--filename</span><span class="token operator">=</span>composer
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Gõ lệnh composer -V nếu có xuất hiện phiên bản là cài thành công</p>`,7),g={id:"cai-lando-https-github-com-lando-lando-releases-bang-2-lenh-sau",tabindex:"-1"},f=a("a",{class:"header-anchor",href:"#cai-lando-https-github-com-lando-lando-releases-bang-2-lenh-sau","aria-hidden":"true"},"#",-1),y={href:"https://github.com/lando/lando/releases",target:"_blank",rel:"noopener noreferrer"},w=s(`<div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">wget</span> https://github.com/lando/lando/releases/download/v3.6.4/lando-x64-v3.6.4.deb
<span class="token function">sudo</span> dpkg <span class="token parameter variable">-i</span> --ignore-depends<span class="token operator">=</span>docker-ce lando-x64-v3.6.4.deb
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="khoi-tao-du-an-voi-lando-va-docker" tabindex="-1"><a class="header-anchor" href="#khoi-tao-du-an-voi-lando-va-docker" aria-hidden="true">#</a> Khởi tạo dự án với lando và docker:</h2><p>Mở ubuntu lên rồi chạy lệnh tạo thư mục chứa code. Ví dụ</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">mkdir</span> drupaldemo
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>vào trong thư mục vừa tạo và tạo file .lando.yml như sau:</p><div class="language-yaml line-numbers-mode" data-ext="yml"><pre class="language-yaml"><code><span class="token key atrule">name</span><span class="token punctuation">:</span> drupaldev
<span class="token key atrule">recipe</span><span class="token punctuation">:</span> drupal9
<span class="token key atrule">config</span><span class="token punctuation">:</span>
  <span class="token key atrule">composer_version</span><span class="token punctuation">:</span> <span class="token string">&#39;2&#39;</span>
  <span class="token key atrule">via</span><span class="token punctuation">:</span> apache<span class="token punctuation">:</span><span class="token number">2.4</span>
  <span class="token key atrule">webroot</span><span class="token punctuation">:</span> web
  <span class="token key atrule">database</span><span class="token punctuation">:</span> mysql<span class="token punctuation">:</span><span class="token number">5.7</span>
  <span class="token key atrule">drush</span><span class="token punctuation">:</span> <span class="token string">&#39;^10&#39;</span>
  <span class="token key atrule">xdebug</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>
<span class="token key atrule">proxy</span><span class="token punctuation">:</span>
  <span class="token key atrule">appserver</span><span class="token punctuation">:</span>
    <span class="token punctuation">-</span> drupaldev.lndo.site
  <span class="token key atrule">phpmyadmin</span><span class="token punctuation">:</span>
    <span class="token punctuation">-</span> pma.drupaldev.lndo.site
<span class="token key atrule">services</span><span class="token punctuation">:</span>
  <span class="token key atrule">appserver</span><span class="token punctuation">:</span>
    <span class="token key atrule">type</span><span class="token punctuation">:</span> php<span class="token punctuation">:</span><span class="token number">8.0</span>
    <span class="token key atrule">xdebug</span><span class="token punctuation">:</span> <span class="token boolean important">false</span>
    <span class="token key atrule">config</span><span class="token punctuation">:</span>
      <span class="token key atrule">conf</span><span class="token punctuation">:</span> lando/php/php.ini
    <span class="token key atrule">build</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> composer install
    <span class="token key atrule">overrides</span><span class="token punctuation">:</span>
      <span class="token key atrule">environment</span><span class="token punctuation">:</span>
        <span class="token key atrule">DRUSH_OPTIONS_URI</span><span class="token punctuation">:</span> <span class="token string">&quot;https://drupaldev.lndo.site&quot;</span>
  <span class="token key atrule">phpmyadmin</span><span class="token punctuation">:</span>
    <span class="token key atrule">type</span><span class="token punctuation">:</span> phpmyadmin
    <span class="token key atrule">hosts</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> database
  <span class="token key atrule">database</span><span class="token punctuation">:</span>
    <span class="token key atrule">creds</span><span class="token punctuation">:</span>
      <span class="token key atrule">user</span><span class="token punctuation">:</span> drupaldev
      <span class="token key atrule">password</span><span class="token punctuation">:</span> drupaldev
      <span class="token key atrule">database</span><span class="token punctuation">:</span> drupaldev
<span class="token comment"># tooling:</span>
<span class="token comment">#   blt:</span>
<span class="token comment">#     service: appserver</span>
<span class="token comment">#     cmd: /app/vendor/acquia/blt/bin/blt</span>
<span class="token comment">#   drupal:</span>
<span class="token comment">#     service: appserver</span>
<span class="token comment">#     cmd: /app/vendor/bin/drupal</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>rồi chạy tiếp lệnh sau để khởi tạo môi trường</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>lando start
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h2 id="bay-gio-clone-code-ve-trong-thu-muc-chua-file-lando-yml-vua-tao-va-install-site-thoi" tabindex="-1"><a class="header-anchor" href="#bay-gio-clone-code-ve-trong-thu-muc-chua-file-lando-yml-vua-tao-va-install-site-thoi" aria-hidden="true">#</a> Bây giờ clone code về trong thư mục chứa file .lando.yml vừa tạo và install site thôi.</h2><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">composer</span> create-project drupal/recommended-project <span class="token builtin class-name">.</span> 
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>để tải source về và truy cập link tại DRUSH_OPTIONS_URI cài đặt drupal như bình thường</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>lando drush si
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h2 id="trong-qua-trinh-su-dung-lando-va-docker-xay-ra-loi-ta-co-the-go-cai-đat-va-cai-lai-nhu-sau" tabindex="-1"><a class="header-anchor" href="#trong-qua-trinh-su-dung-lando-va-docker-xay-ra-loi-ta-co-the-go-cai-đat-va-cai-lai-nhu-sau" aria-hidden="true">#</a> Trong quá trình sử dụng lando và docker xảy ra lỗi ta có thể gỡ cài đặt và cài lại như sau:</h2><p>Mở cửa sổ dòng lệnh với ubuntu và chạy lệnh gỡ lando:</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">sudo</span> <span class="token function">apt-get</span> remove lando
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>Vào Programs and Features của windows và gỡ cài đặt Docker Desktop</p><p>Khởi động lại máy</p><p>Tải về Docker Desktop và cài lại</p><p>Tiếp đến mở cửa sổ dòng lệnh với ubuntu và chạy lệnh cài đặt lando:</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">sudo</span> dpkg <span class="token parameter variable">-i</span> --ignore-depends<span class="token operator">=</span>docker-ce lando-x64-v3.6.4.deb
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h3 id="file-lando-x64-v3-6-4-deb-đa-đuoc-tai-tu-luc-cai-đat-va-nam-o-đo-nen-khong-can-tai-lai-neu-co-phien-ban-lando-moi-hon-thi-co-the-tai-ve-va-cai-ban-moi-neu-muon-voi-lenh" tabindex="-1"><a class="header-anchor" href="#file-lando-x64-v3-6-4-deb-đa-đuoc-tai-tu-luc-cai-đat-va-nam-o-đo-nen-khong-can-tai-lai-neu-co-phien-ban-lando-moi-hon-thi-co-the-tai-ve-va-cai-ban-moi-neu-muon-voi-lenh" aria-hidden="true">#</a> File lando-x64-v3.6.4.deb đã được tải từ lúc cài đặt và nằm ở đó nên không cần tải lại, Nếu có phiên bản lando mới hơn thì có thể tải về và cài bản mới nếu muốn với lệnh:</h3><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">wget</span> https://github.com/lando/lando/releases/download/<span class="token punctuation">{</span>version<span class="token punctuation">}</span>/lando-x64-<span class="token punctuation">{</span>version<span class="token punctuation">}</span>.deb
<span class="token function">sudo</span> dpkg <span class="token parameter variable">-i</span> --ignore-depends<span class="token operator">=</span>docker-ce lando-x64-<span class="token punctuation">{</span>version<span class="token punctuation">}</span>.deb
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>Thay {version} bằng version bạn muốn. Ví dụ v3.6.4</p><h3 id="trong-qua-trinh-go-cai-đat-docker-va-lando-thi-source-cu-khong-bi-anh-huong-ban-chi-can-backup-database-thuong-xuyen-thi-sau-khi-cai-lai-docker-voi-lando-chi-can-import-database-vao-la-đa-co-site-nhu-cu" tabindex="-1"><a class="header-anchor" href="#trong-qua-trinh-go-cai-đat-docker-va-lando-thi-source-cu-khong-bi-anh-huong-ban-chi-can-backup-database-thuong-xuyen-thi-sau-khi-cai-lai-docker-voi-lando-chi-can-import-database-vao-la-đa-co-site-nhu-cu" aria-hidden="true">#</a> Trong quá trình gỡ cài đặt Docker và lando thì source cũ không bị ảnh hưởng, Bạn chỉ cần backup database thường xuyên thì sau khi cài lại Docker với lando chỉ cần import database vào là đã có site như cũ.</h3><p>Lệnh import database với lando:</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>lando db-import database_file.sql
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h2 id="mot-so-lenh-thuong-dung-voi-lando" tabindex="-1"><a class="header-anchor" href="#mot-so-lenh-thuong-dung-voi-lando" aria-hidden="true">#</a> Một số lệnh thường dùng với lando:</h2><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>lando <span class="token function">composer</span>          Runs <span class="token function">composer</span> commands
lando config            Displays the lando configuration
lando db-export <span class="token punctuation">[</span>file<span class="token punctuation">]</span>  Exports database from a database <span class="token function">service</span> to a <span class="token function">file</span>
lando db-import <span class="token operator">&lt;</span>file<span class="token operator">&gt;</span>  Imports a dump <span class="token function">file</span> into a database <span class="token function">service</span>
lando destroy           Destroys your app
lando drush             Runs drush commands
lando info              Prints info about your app
lando init              Initializes code <span class="token keyword">for</span> use with lando
lando list              Lists all running lando apps and containers
lando logs              Displays logs <span class="token keyword">for</span> your app
lando mysql             Drops into a MySQL shell on a database <span class="token function">service</span>
lando php               Runs php commands
lando poweroff          Spins down all lando related containers
lando rebuild           Rebuilds your app from scratch, preserving data
lando restart           Restarts your app
lando share             Shares your <span class="token builtin class-name">local</span> site publicly
lando <span class="token function">ssh</span>               Drops into a shell on a service, runs commands
lando start             Starts your app
lando stop              Stops your app
lando version           Displays the lando version
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,28);function x(_,S){const e=t("ExternalLinkIcon");return l(),c("div",null,[p,a("p",null,[n("Tải "),a("a",r,[n("https://wslstorestorage.blob.core.windows.net/wslblob/wsl_update_x64.msi"),i(e)]),n(" rồi cài đặt"),u,n(" Cài xong mở PowerShell chạy lệnh:")]),v,a("h2",h,[m,n(" Tải docker về và cài "),a("a",b,[n("https://www.docker.com/"),i(e)])]),k,a("h2",g,[f,n(" Cài lando "),a("a",y,[n("https://github.com/lando/lando/releases"),i(e)]),n(" bằng 2 lệnh sau:")]),w])}const T=o(d,[["render",x],["__file","cai-moi-truong-drupal-voi-lando-docker-ubuntu-tren-windows-10.html.vue"]]);export{T as default};
