import{_ as s}from"./plugin-vue_export-helper-DlAUqK2U.js";import{c as i,o as a,b as n}from"./app-DwYDF4wM.js";const h={},l=n(`<h1 id="xoa-nhieu-user-trong-drupal" tabindex="-1"><a class="header-anchor" href="#xoa-nhieu-user-trong-drupal"><span>Xóa nhiều user trong Drupal</span></a></h1><p>Khi cần xóa hàng triệu user trong Drupal 10, bạn có thể sử dụng nhiều phương pháp khác nhau, tùy thuộc vào khối lượng dữ liệu và yêu cầu về tính toàn vẹn dữ liệu. Dưới đây là các phương pháp phổ biến, ưu nhược điểm và trường hợp ứng dụng.</p><hr><h2 id="_1-xoa-tung-user-theo-vong-lap-loop" tabindex="-1"><a class="header-anchor" href="#_1-xoa-tung-user-theo-vong-lap-loop"><span>1. Xóa Từng User Theo Vòng Lặp (Loop)</span></a></h2><h3 id="code-mau" tabindex="-1"><a class="header-anchor" href="#code-mau"><span>Code mẫu:</span></a></h3><div class="language-php line-numbers-mode" data-highlighter="shiki" data-ext="php" data-title="php" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">use</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> Drupal\\user\\Entity\\</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">User</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">function</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> delete_users_in_loop</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">$uids</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">) {</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    foreach</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">$uids</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> as</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> $uid</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">) {</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">        $user</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> User</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">::</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">load</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">$uid</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">        if</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">$user</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">) {</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">            $user</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">-&gt;</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">delete</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">();</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">        }</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    }</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="uu-điem" tabindex="-1"><a class="header-anchor" href="#uu-điem"><span>Ưu điểm:</span></a></h3><ul><li>Dễ triển khai và hiểu.</li><li>Phù hợp cho dữ liệu nhỏ hoặc trung bình.</li><li>Đảm bảo tính toàn vẹn dữ liệu.</li></ul><h3 id="nhuoc-điem" tabindex="-1"><a class="header-anchor" href="#nhuoc-điem"><span>Nhược điểm:</span></a></h3><ul><li>Không tối ưu cho dữ liệu lớn (hàng triệu user).</li><li>Dễ gặp lỗi timeout hoặc hết tài nguyên server.</li></ul><h3 id="ung-dung" tabindex="-1"><a class="header-anchor" href="#ung-dung"><span>Ứng dụng:</span></a></h3><ul><li>Xử lý thử nghiệm hoặc dữ liệu nhỏ.</li></ul><hr><h2 id="_2-xoa-theo-nhom-batch-api" tabindex="-1"><a class="header-anchor" href="#_2-xoa-theo-nhom-batch-api"><span>2. Xóa Theo Nhóm (Batch API)</span></a></h2><h3 id="code-mau-1" tabindex="-1"><a class="header-anchor" href="#code-mau-1"><span>Code mẫu:</span></a></h3><div class="language-php line-numbers-mode" data-highlighter="shiki" data-ext="php" data-title="php" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">use</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> Drupal\\user\\Entity\\</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">User</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">function</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> delete_users_batch</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">$uids</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">) {</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">    $operations</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> [];</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    foreach</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;">array_chunk</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">$uids</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">,</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 100</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">) </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">as</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> $chunk</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">) {</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">        $operations</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">[] </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> [</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">            &#39;delete_user_batch_callback&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">,</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">            [</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">$chunk</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">],</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">        ];</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    }</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">    $batch</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> [</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">        &#39;title&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> =&gt; </span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">t</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&#39;Deleting users...&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">),</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">        &#39;operations&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> =&gt; </span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">$operations</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">,</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">        &#39;finished&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> =&gt; </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&#39;delete_user_batch_finished&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">,</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    ];</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">    batch_set</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">$batch</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">function</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> delete_user_batch_callback</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">$uids</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">&amp;</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">$context</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">) {</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    foreach</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">$uids</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> as</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> $uid</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">) {</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">        $user</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> User</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">::</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">load</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">$uid</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">        if</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">$user</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">) {</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">            $user</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">-&gt;</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">delete</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">();</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">        }</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    }</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">function</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> delete_user_batch_finished</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">$success</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">$results</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">$operations</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">) {</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    if</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">$success</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">) {</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">        drupal_set_message</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">t</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&#39;All users have been deleted.&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">));</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    }</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="uu-điem-1" tabindex="-1"><a class="header-anchor" href="#uu-điem-1"><span>Ưu điểm:</span></a></h3><ul><li>Tránh lỗi timeout bằng cách xử lý từng nhóm nhỏ.</li><li>Giao diện hiển thị tiến trình thân thiện.</li></ul><h3 id="nhuoc-điem-1" tabindex="-1"><a class="header-anchor" href="#nhuoc-điem-1"><span>Nhược điểm:</span></a></h3><ul><li>Cần cấu hình thêm Batch API.</li><li>Tốc độ không cao với dữ liệu rất lớn.</li></ul><h3 id="ung-dung-1" tabindex="-1"><a class="header-anchor" href="#ung-dung-1"><span>Ứng dụng:</span></a></h3><ul><li>Dữ liệu lớn mà vẫn cần giao diện quản trị viên dễ sử dụng.</li></ul><hr><h2 id="_3-su-dung-drush-command-qua-controller" tabindex="-1"><a class="header-anchor" href="#_3-su-dung-drush-command-qua-controller"><span>3. Sử Dụng Drush Command Qua Controller</span></a></h2><h3 id="code-mau-2" tabindex="-1"><a class="header-anchor" href="#code-mau-2"><span>Code mẫu:</span></a></h3><div class="language-php line-numbers-mode" data-highlighter="shiki" data-ext="php" data-title="php" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">use</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> Drupal\\Core\\Controller\\</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">ControllerBase</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">use</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> Symfony\\Component\\HttpFoundation\\</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">JsonResponse</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">class</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> UserDeleteController</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> extends</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> ControllerBase</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> function</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> deleteUsers</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">() {</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">        \\</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">Drupal</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">::</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">service</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&#39;drush.service&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)-&gt;</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">runCommand</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&#39;user:cancel --all&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">        return</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> new</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> JsonResponse</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">([</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&#39;status&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> =&gt; </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&#39;ok&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&#39;message&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> =&gt; </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&#39;All users are being deleted&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">]);</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    }</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="uu-điem-2" tabindex="-1"><a class="header-anchor" href="#uu-điem-2"><span>Ưu điểm:</span></a></h3><ul><li>Hiệu suất cao với số lượng user lớn.</li><li>Dễ triển khai nếu có quyền truy cập CLI.</li></ul><h3 id="nhuoc-điem-2" tabindex="-1"><a class="header-anchor" href="#nhuoc-điem-2"><span>Nhược điểm:</span></a></h3><ul><li>Phụ thuộc vào Drush và CLI.</li><li>Không có giao diện trực quan.</li></ul><h3 id="ung-dung-2" tabindex="-1"><a class="header-anchor" href="#ung-dung-2"><span>Ứng dụng:</span></a></h3><ul><li>Xóa nhanh số lượng lớn user khi có quyền truy cập server.</li></ul><hr><h2 id="_4-xoa-truc-tiep-qua-query-database" tabindex="-1"><a class="header-anchor" href="#_4-xoa-truc-tiep-qua-query-database"><span>4. Xóa Trực Tiếp Qua Query Database</span></a></h2><h3 id="code-mau-3" tabindex="-1"><a class="header-anchor" href="#code-mau-3"><span>Code mẫu:</span></a></h3><div class="language-php line-numbers-mode" data-highlighter="shiki" data-ext="php" data-title="php" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">function</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> delete_users_via_query</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">$uids</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">) {</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">    $connection</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> \\</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">Drupal</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">::</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">database</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">();</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">    $connection</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">-&gt;</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">delete</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&#39;users_field_data&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">        -&gt;</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">condition</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&#39;uid&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">$uids</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&#39;IN&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">        -&gt;</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">execute</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">();</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="uu-điem-3" tabindex="-1"><a class="header-anchor" href="#uu-điem-3"><span>Ưu điểm:</span></a></h3><ul><li>Tốc độ nhanh nhất.</li><li>Phù hợp khi không cần kích hoạt các hook liên quan.</li></ul><h3 id="nhuoc-điem-3" tabindex="-1"><a class="header-anchor" href="#nhuoc-điem-3"><span>Nhược điểm:</span></a></h3><ul><li>Dễ gây lỗi toàn vẹn dữ liệu.</li><li>Có thể bỏ sót các dữ liệu liên quan.</li></ul><h3 id="ung-dung-3" tabindex="-1"><a class="header-anchor" href="#ung-dung-3"><span>Ứng dụng:</span></a></h3><ul><li>Khi cần xử lý nhanh và không quan tâm đến dữ liệu liên quan.</li></ul><hr><h2 id="_5-su-dung-storage-handler" tabindex="-1"><a class="header-anchor" href="#_5-su-dung-storage-handler"><span>5. Sử Dụng Storage Handler</span></a></h2><h3 id="code-mau-4" tabindex="-1"><a class="header-anchor" href="#code-mau-4"><span>Code mẫu:</span></a></h3><div class="language-php line-numbers-mode" data-highlighter="shiki" data-ext="php" data-title="php" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">use</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> Drupal\\user\\Entity\\</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">User</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">function</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> delete_users_with_storage_handler</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">$uids</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">) {</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">    $user_storage</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> \\</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">Drupal</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">::</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">entityTypeManager</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">()-&gt;</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">getStorage</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&#39;user&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">    $users</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> $user_storage</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">-&gt;</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">loadMultiple</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">$uids</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    if</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">!</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;">empty</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">$users</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)) {</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">        $user_storage</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">-&gt;</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">delete</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">$users</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    }</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="uu-điem-4" tabindex="-1"><a class="header-anchor" href="#uu-điem-4"><span>Ưu điểm:</span></a></h3><ul><li>Sử dụng API chính thức của Drupal, đảm bảo tính toàn vẹn dữ liệu.</li><li>Linh hoạt, dễ tích hợp thêm logic khác.</li></ul><h3 id="nhuoc-điem-4" tabindex="-1"><a class="header-anchor" href="#nhuoc-điem-4"><span>Nhược điểm:</span></a></h3><ul><li>Không tối ưu cho dữ liệu cực lớn.</li><li>Tiêu tốn nhiều bộ nhớ và thời gian xử lý.</li></ul><h3 id="ung-dung-4" tabindex="-1"><a class="header-anchor" href="#ung-dung-4"><span>Ứng dụng:</span></a></h3><ul><li>Dữ liệu vừa và nhỏ, hoặc khi cần đảm bảo toàn vẹn dữ liệu.</li></ul><hr><h2 id="_6-ket-hop-storage-handler-va-batch-api" tabindex="-1"><a class="header-anchor" href="#_6-ket-hop-storage-handler-va-batch-api"><span>6. Kết Hợp Storage Handler Và Batch API</span></a></h2><h3 id="code-mau-5" tabindex="-1"><a class="header-anchor" href="#code-mau-5"><span>Code mẫu:</span></a></h3><div class="language-php line-numbers-mode" data-highlighter="shiki" data-ext="php" data-title="php" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">use</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> Drupal\\user\\Entity\\</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">User</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">function</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> batch_delete_users</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">$uids</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">) {</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">    $operations</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> [];</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    foreach</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;">array_chunk</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">$uids</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">,</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 100</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">) </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">as</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> $chunk</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">) {</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">        $operations</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">[] </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> [</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">            &#39;batch_delete_users_operation&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">,</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">            [</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">$chunk</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">],</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">        ];</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">    $batch</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> [</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">        &#39;title&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> =&gt; </span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">t</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&#39;Deleting users...&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">),</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">        &#39;operations&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> =&gt; </span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">$operations</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">,</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">        &#39;finished&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> =&gt; </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&#39;batch_delete_users_finished&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">,</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    ];</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">    batch_set</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">$batch</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">function</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> batch_delete_users_operation</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">$uids</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">&amp;</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">$context</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">) {</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">    $user_storage</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> \\</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">Drupal</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">::</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">entityTypeManager</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">()-&gt;</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">getStorage</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&#39;user&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">    $users</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> $user_storage</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">-&gt;</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">loadMultiple</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">$uids</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">    $user_storage</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">-&gt;</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">delete</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">$users</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">function</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> batch_delete_users_finished</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">$success</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">$results</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">$operations</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">) {</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    if</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">$success</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">) {</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">        drupal_set_message</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">t</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&#39;All users have been deleted.&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">));</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    }</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="uu-điem-5" tabindex="-1"><a class="header-anchor" href="#uu-điem-5"><span>Ưu điểm:</span></a></h3><ul><li>Hiệu quả cao, tránh lỗi timeout.</li><li>Tích hợp tốt với hệ thống, đảm bảo toàn vẹn dữ liệu.</li></ul><h3 id="nhuoc-điem-5" tabindex="-1"><a class="header-anchor" href="#nhuoc-điem-5"><span>Nhược điểm:</span></a></h3><ul><li>Phức tạp hơn các phương pháp khác.</li></ul><h3 id="ung-dung-5" tabindex="-1"><a class="header-anchor" href="#ung-dung-5"><span>Ứng dụng:</span></a></h3><ul><li>Xử lý số lượng lớn user với yêu cầu tính toàn vẹn dữ liệu và hiệu suất.</li></ul><hr><h2 id="so-sanh-cac-phuong-phap" tabindex="-1"><a class="header-anchor" href="#so-sanh-cac-phuong-phap"><span>So Sánh Các Phương Pháp</span></a></h2><table><thead><tr><th>Phương pháp</th><th>Tính toàn vẹn dữ liệu</th><th>Hiệu suất (dữ liệu lớn)</th><th>Độ phức tạp triển khai</th><th>Ứng dụng</th></tr></thead><tbody><tr><td></td><td></td><td></td><td></td><td></td></tr></tbody></table><table><thead><tr><th><strong>Loop</strong></th><th>✅</th><th>Thấp</th><th>Thấp</th><th>Dữ liệu nhỏ</th></tr></thead><tbody><tr><td><strong>Batch API</strong></td><td>✅</td><td>Trung bình</td><td>Trung bình</td><td>Dữ liệu lớn</td></tr><tr><td><strong>Drush Command</strong></td><td>✅</td><td>Cao</td><td>Thấp</td><td>Dữ liệu rất lớn</td></tr><tr><td><strong>Query trực tiếp</strong></td><td>❌</td><td>Rất cao</td><td>Thấp</td><td>Xóa nhanh, không cần toàn vẹn</td></tr><tr><td><strong>Storage Handler</strong></td><td>✅</td><td>Trung bình</td><td>Thấp</td><td>Dữ liệu vừa và nhỏ</td></tr><tr><td><strong>Storage Handler + Batch API</strong></td><td>✅</td><td>Cao</td><td>Trung bình</td><td>Dữ liệu rất lớn</td></tr></tbody></table><hr><h2 id="ket-luan" tabindex="-1"><a class="header-anchor" href="#ket-luan"><span>Kết Luận</span></a></h2><ul><li>Đối với <strong>dữ liệu nhỏ</strong>: Sử dụng phương pháp <strong>Loop</strong> hoặc <strong>Storage Handler</strong>.</li><li>Đối với <strong>dữ liệu lớn</strong>: Kết hợp <strong>Batch API</strong> với <strong>Storage Handler</strong> hoặc sử dụng <strong>Drush Command</strong>.</li><li>Nếu cần tốc độ cao và không cần toàn vẹn dữ liệu: Chọn <strong>Query trực tiếp</strong>.</li></ul><p>Bạn nên cân nhắc kỹ yêu cầu dự án và hạ tầng để chọn phương pháp phù hợp nhất.</p>`,70),e=[l];function t(p,k){return a(),i("div",null,e)}const g=s(h,[["render",t],["__file","xoa-nhieu-user.html.vue"]]),u=JSON.parse('{"path":"/blog/xoa-nhieu-user.html","title":"Xóa nhiều user trong Drupal","lang":"vi-VN","frontmatter":{"icon":"edit","date":"2025-01-25T00:00:00.000Z","contributors":false,"category":["Drupal","Drupal module","Module Development"],"tag":["Drupal","Code"],"description":"Xóa nhiều user trong Drupal Khi cần xóa hàng triệu user trong Drupal 10, bạn có thể sử dụng nhiều phương pháp khác nhau, tùy thuộc vào khối lượng dữ liệu và yêu cầu về tính toàn...","head":[["meta",{"property":"og:url","content":"https://uitcode.com/blog/xoa-nhieu-user.html"}],["meta",{"property":"og:site_name","content":"UITCODE"}],["meta",{"property":"og:title","content":"Xóa nhiều user trong Drupal"}],["meta",{"property":"og:description","content":"Xóa nhiều user trong Drupal Khi cần xóa hàng triệu user trong Drupal 10, bạn có thể sử dụng nhiều phương pháp khác nhau, tùy thuộc vào khối lượng dữ liệu và yêu cầu về tính toàn..."}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:locale","content":"vi-VN"}],["meta",{"property":"og:updated_time","content":"2025-01-25T07:21:33.000Z"}],["meta",{"property":"article:author","content":"Mr. Hoang Thien"}],["meta",{"property":"article:tag","content":"Drupal"}],["meta",{"property":"article:tag","content":"Code"}],["meta",{"property":"article:published_time","content":"2025-01-25T00:00:00.000Z"}],["meta",{"property":"article:modified_time","content":"2025-01-25T07:21:33.000Z"}],["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"Xóa nhiều user trong Drupal\\",\\"image\\":[\\"\\"],\\"datePublished\\":\\"2025-01-25T00:00:00.000Z\\",\\"dateModified\\":\\"2025-01-25T07:21:33.000Z\\",\\"author\\":[{\\"@type\\":\\"Person\\",\\"name\\":\\"Mr. Hoang Thien\\",\\"url\\":\\"https://www.youtube.com/c/HoangThienUITCODE\\"}]}"]]},"headers":[{"level":2,"title":"1. Xóa Từng User Theo Vòng Lặp (Loop)","slug":"_1-xoa-tung-user-theo-vong-lap-loop","link":"#_1-xoa-tung-user-theo-vong-lap-loop","children":[{"level":3,"title":"Code mẫu:","slug":"code-mau","link":"#code-mau","children":[]},{"level":3,"title":"Ưu điểm:","slug":"uu-điem","link":"#uu-điem","children":[]},{"level":3,"title":"Nhược điểm:","slug":"nhuoc-điem","link":"#nhuoc-điem","children":[]},{"level":3,"title":"Ứng dụng:","slug":"ung-dung","link":"#ung-dung","children":[]}]},{"level":2,"title":"2. Xóa Theo Nhóm (Batch API)","slug":"_2-xoa-theo-nhom-batch-api","link":"#_2-xoa-theo-nhom-batch-api","children":[{"level":3,"title":"Code mẫu:","slug":"code-mau-1","link":"#code-mau-1","children":[]},{"level":3,"title":"Ưu điểm:","slug":"uu-điem-1","link":"#uu-điem-1","children":[]},{"level":3,"title":"Nhược điểm:","slug":"nhuoc-điem-1","link":"#nhuoc-điem-1","children":[]},{"level":3,"title":"Ứng dụng:","slug":"ung-dung-1","link":"#ung-dung-1","children":[]}]},{"level":2,"title":"3. Sử Dụng Drush Command Qua Controller","slug":"_3-su-dung-drush-command-qua-controller","link":"#_3-su-dung-drush-command-qua-controller","children":[{"level":3,"title":"Code mẫu:","slug":"code-mau-2","link":"#code-mau-2","children":[]},{"level":3,"title":"Ưu điểm:","slug":"uu-điem-2","link":"#uu-điem-2","children":[]},{"level":3,"title":"Nhược điểm:","slug":"nhuoc-điem-2","link":"#nhuoc-điem-2","children":[]},{"level":3,"title":"Ứng dụng:","slug":"ung-dung-2","link":"#ung-dung-2","children":[]}]},{"level":2,"title":"4. Xóa Trực Tiếp Qua Query Database","slug":"_4-xoa-truc-tiep-qua-query-database","link":"#_4-xoa-truc-tiep-qua-query-database","children":[{"level":3,"title":"Code mẫu:","slug":"code-mau-3","link":"#code-mau-3","children":[]},{"level":3,"title":"Ưu điểm:","slug":"uu-điem-3","link":"#uu-điem-3","children":[]},{"level":3,"title":"Nhược điểm:","slug":"nhuoc-điem-3","link":"#nhuoc-điem-3","children":[]},{"level":3,"title":"Ứng dụng:","slug":"ung-dung-3","link":"#ung-dung-3","children":[]}]},{"level":2,"title":"5. Sử Dụng Storage Handler","slug":"_5-su-dung-storage-handler","link":"#_5-su-dung-storage-handler","children":[{"level":3,"title":"Code mẫu:","slug":"code-mau-4","link":"#code-mau-4","children":[]},{"level":3,"title":"Ưu điểm:","slug":"uu-điem-4","link":"#uu-điem-4","children":[]},{"level":3,"title":"Nhược điểm:","slug":"nhuoc-điem-4","link":"#nhuoc-điem-4","children":[]},{"level":3,"title":"Ứng dụng:","slug":"ung-dung-4","link":"#ung-dung-4","children":[]}]},{"level":2,"title":"6. Kết Hợp Storage Handler Và Batch API","slug":"_6-ket-hop-storage-handler-va-batch-api","link":"#_6-ket-hop-storage-handler-va-batch-api","children":[{"level":3,"title":"Code mẫu:","slug":"code-mau-5","link":"#code-mau-5","children":[]},{"level":3,"title":"Ưu điểm:","slug":"uu-điem-5","link":"#uu-điem-5","children":[]},{"level":3,"title":"Nhược điểm:","slug":"nhuoc-điem-5","link":"#nhuoc-điem-5","children":[]},{"level":3,"title":"Ứng dụng:","slug":"ung-dung-5","link":"#ung-dung-5","children":[]}]},{"level":2,"title":"So Sánh Các Phương Pháp","slug":"so-sanh-cac-phuong-phap","link":"#so-sanh-cac-phuong-phap","children":[]},{"level":2,"title":"Kết Luận","slug":"ket-luan","link":"#ket-luan","children":[]}],"git":{"createdTime":1664105298000,"updatedTime":1737789693000,"contributors":[{"name":"Hoang Thien","email":"hoangthien.uit@gmail.com","commits":2},{"name":"HoangThien UITCODE","email":"hoangthien.uit@gmail.com","commits":1}]},"readingTime":{"minutes":3.47,"words":1042},"filePathRelative":"blog/xoa-nhieu-user.md","localizedDate":"25 tháng 1 năm 2025","excerpt":"\\n<p>Khi cần xóa hàng triệu user trong Drupal 10, bạn có thể sử dụng nhiều phương pháp khác nhau, tùy thuộc vào khối lượng dữ liệu và yêu cầu về tính toàn vẹn dữ liệu. Dưới đây là các phương pháp phổ biến, ưu nhược điểm và trường hợp ứng dụng.</p>","autoDesc":true}');export{g as comp,u as data};
