import{_ as i}from"./plugin-vue_export-helper-DlAUqK2U.js";import{c as s,o as a,b as n}from"./app-DzpLXekk.js";const e={},t=n(`<h1 id="xoa-nhieu-node-trong-drupal" tabindex="-1"><a class="header-anchor" href="#xoa-nhieu-node-trong-drupal"><span>Xóa nhiều node trong Drupal</span></a></h1><p>Đầu tiên chúng ta cần nid của các node cần xóa.</p><h2 id="đe-lay-nid-cua-cac-node-can-xoa-chung-ta-co-the-dung-entityquery-nhu-sau" tabindex="-1"><a class="header-anchor" href="#đe-lay-nid-cua-cac-node-can-xoa-chung-ta-co-the-dung-entityquery-nhu-sau"><span>Để lấy nid của các node cần xóa chúng ta co thể dùng entityQuery như sau</span></a></h2><div class="language-php line-numbers-mode" data-highlighter="shiki" data-ext="php" data-title="php" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">$content_type</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &#39;content_type_name&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">$nids</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> \\</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">Drupal</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">::</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">entityQuery</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&#39;node&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">  -&gt;</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">condition</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&#39;type&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">$content_type</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">  -&gt;</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">execute</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">();</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="đe-xoa-nhieu-node-ta-co-the-dung-1-trong-2-cach-sau" tabindex="-1"><a class="header-anchor" href="#đe-xoa-nhieu-node-ta-co-the-dung-1-trong-2-cach-sau"><span>Để xóa nhiều node ta có thể dùng 1 trong 2 cách sau</span></a></h2><h3 id="cach-1-lap-het-cac-node-va-xoa-tuan-tu" tabindex="-1"><a class="header-anchor" href="#cach-1-lap-het-cac-node-va-xoa-tuan-tu"><span>Cách 1: Lặp hết các node và xóa tuần tự</span></a></h3><p>Cách này xóa chậm hơn cách 2 nhưng phù hợp với các tác vụ đi kèm khi xóa node, ví dụ gửi mail và cần lấy các giá trị trong các field của node để bỏ vào nội dung mail chẳng hạn.</p><div class="language-php line-numbers-mode" data-highlighter="shiki" data-ext="php" data-title="php" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">use</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">  \\Drupal\\node\\Entity\\</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">Node</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">$nodes</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> Node</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">::</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">loadMultiple</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">$nids</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">foreach</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">$nodes</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> as</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> $node</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">) {</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">  $node</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">-&gt;</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">delete</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">();</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="cach-2-su-dung-storage-handler-đe-xoa" tabindex="-1"><a class="header-anchor" href="#cach-2-su-dung-storage-handler-đe-xoa"><span>Cách 2: Sử dụng storage handler để xóa</span></a></h3><p>Cách này xóa nhanh hơn cách 1, phù hợp với việc chỉ xóa node mà không làm gì thêm.</p><div class="language-php line-numbers-mode" data-highlighter="shiki" data-ext="php" data-title="php" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">$storage_handler</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> \\</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">Drupal</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">::</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">entityTypeManager</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">()-&gt;</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">getStorage</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&#39;node&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">$entities</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> $storage_handler</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">-&gt;</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">loadMultiple</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">$ids</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">$storage_handler</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">-&gt;</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">delete</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">$entities</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">);</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,11),h=[t];function l(p,d){return a(),s("div",null,h)}const c=i(e,[["render",l],["__file","xoa-nhieu-node.html.vue"]]),o=JSON.parse(`{"path":"/blog/xoa-nhieu-node.html","title":"Xóa nhiều node trong Drupal","lang":"vi-VN","frontmatter":{"icon":"edit","date":"2022-09-25T00:00:00.000Z","contributors":false,"category":["Drupal","Drupal module","Module Development"],"tag":["Drupal","Code"],"description":"Xóa nhiều node trong Drupal Đầu tiên chúng ta cần nid của các node cần xóa. Để lấy nid của các node cần xóa chúng ta co thể dùng entityQuery như sau Để xóa nhiều node ta có thể ...","head":[["meta",{"property":"og:url","content":"https://uitcode.com/blog/xoa-nhieu-node.html"}],["meta",{"property":"og:site_name","content":"UITCODE"}],["meta",{"property":"og:title","content":"Xóa nhiều node trong Drupal"}],["meta",{"property":"og:description","content":"Xóa nhiều node trong Drupal Đầu tiên chúng ta cần nid của các node cần xóa. Để lấy nid của các node cần xóa chúng ta co thể dùng entityQuery như sau Để xóa nhiều node ta có thể ..."}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:locale","content":"vi-VN"}],["meta",{"property":"og:updated_time","content":"2024-09-01T10:00:05.000Z"}],["meta",{"property":"article:author","content":"Mr. Hoang Thien"}],["meta",{"property":"article:tag","content":"Drupal"}],["meta",{"property":"article:tag","content":"Code"}],["meta",{"property":"article:published_time","content":"2022-09-25T00:00:00.000Z"}],["meta",{"property":"article:modified_time","content":"2024-09-01T10:00:05.000Z"}],["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"Xóa nhiều node trong Drupal\\",\\"image\\":[\\"\\"],\\"datePublished\\":\\"2022-09-25T00:00:00.000Z\\",\\"dateModified\\":\\"2024-09-01T10:00:05.000Z\\",\\"author\\":[{\\"@type\\":\\"Person\\",\\"name\\":\\"Mr. Hoang Thien\\",\\"url\\":\\"https://www.youtube.com/c/HoangThienUITCODE\\"}]}"]]},"headers":[{"level":2,"title":"Để lấy nid của các node cần xóa chúng ta co thể dùng entityQuery như sau","slug":"đe-lay-nid-cua-cac-node-can-xoa-chung-ta-co-the-dung-entityquery-nhu-sau","link":"#đe-lay-nid-cua-cac-node-can-xoa-chung-ta-co-the-dung-entityquery-nhu-sau","children":[]},{"level":2,"title":"Để xóa nhiều node ta có thể dùng 1 trong 2 cách sau","slug":"đe-xoa-nhieu-node-ta-co-the-dung-1-trong-2-cach-sau","link":"#đe-xoa-nhieu-node-ta-co-the-dung-1-trong-2-cach-sau","children":[{"level":3,"title":"Cách 1: Lặp hết các node và xóa tuần tự","slug":"cach-1-lap-het-cac-node-va-xoa-tuan-tu","link":"#cach-1-lap-het-cac-node-va-xoa-tuan-tu","children":[]},{"level":3,"title":"Cách 2: Sử dụng storage handler để xóa","slug":"cach-2-su-dung-storage-handler-đe-xoa","link":"#cach-2-su-dung-storage-handler-đe-xoa","children":[]}]}],"git":{"createdTime":1664105298000,"updatedTime":1725184805000,"contributors":[{"name":"Hoang Thien","email":"hoangthien.uit@gmail.com","commits":2}]},"readingTime":{"minutes":0.69,"words":207},"filePathRelative":"blog/xoa-nhieu-node.md","localizedDate":"25 tháng 9 năm 2022","excerpt":"\\n<p>Đầu tiên chúng ta cần nid của các node cần xóa.</p>\\n<h2>Để lấy nid của các node cần xóa chúng ta co thể dùng entityQuery như sau</h2>\\n<div class=\\"language-php line-numbers-mode\\" data-highlighter=\\"shiki\\" data-ext=\\"php\\" data-title=\\"php\\" style=\\"--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34\\"><pre class=\\"shiki shiki-themes one-light one-dark-pro vp-code\\"><code><span class=\\"line\\"><span style=\\"--shiki-light:#E45649;--shiki-dark:#E06C75\\">$content_type</span><span style=\\"--shiki-light:#383A42;--shiki-dark:#56B6C2\\"> =</span><span style=\\"--shiki-light:#50A14F;--shiki-dark:#98C379\\"> 'content_type_name'</span><span style=\\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\\">;</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#E45649;--shiki-dark:#E06C75\\">$nids</span><span style=\\"--shiki-light:#383A42;--shiki-dark:#56B6C2\\"> =</span><span style=\\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\\"> \\\\</span><span style=\\"--shiki-light:#C18401;--shiki-dark:#E5C07B\\">Drupal</span><span style=\\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\\">::</span><span style=\\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\\">entityQuery</span><span style=\\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\\">(</span><span style=\\"--shiki-light:#50A14F;--shiki-dark:#98C379\\">'node'</span><span style=\\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\\">)</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\\">  -&gt;</span><span style=\\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\\">condition</span><span style=\\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\\">(</span><span style=\\"--shiki-light:#50A14F;--shiki-dark:#98C379\\">'type'</span><span style=\\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\\">, </span><span style=\\"--shiki-light:#E45649;--shiki-dark:#E06C75\\">$content_type</span><span style=\\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\\">)</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\\">  -&gt;</span><span style=\\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\\">execute</span><span style=\\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\\">();</span></span></code></pre>\\n<div class=\\"line-numbers\\" aria-hidden=\\"true\\" style=\\"counter-reset:line-number 0\\"><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div></div></div>","autoDesc":true}`);export{c as comp,o as data};
